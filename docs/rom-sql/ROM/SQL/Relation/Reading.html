<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ROM::SQL::Relation::Reading
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ROM::SQL::Relation::Reading";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../ROM.html" title="ROM (module)">ROM</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../SQL.html" title="ROM::SQL (module)">SQL</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></span>
     &raquo; 
    <span class="title">Reading</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: ROM::SQL::Relation::Reading
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">ROM::SQL::Relation</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/rom/sql/relation/reading.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Query API for SQL::Relation</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="ROW_LOCK_MODES-constant" class="">ROW_LOCK_MODES =
          <div class="docstring">
  <div class="discussion">
    <p>Row-level lock modes</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>update:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOR UPDATE</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span>
  <span class='comment'># https://www.postgresql.org/docs/current/static/sql-select.html#SQL-FOR-UPDATE-SHARE
</span>  <span class='label'>postgres:</span> <span class='lbrace'>{</span>
    <span class='label'>update:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOR UPDATE</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span>
    <span class='label'>no_key_update:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOR NO KEY UPDATE</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span>
    <span class='label'>share:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOR SHARE</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span>
    <span class='label'>key_share:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOR KEY SHARE</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='comment'># https://dev.mysql.com/doc/refman/5.7/en/innodb-locking-reads.html
</span>  <span class='label'>mysql:</span> <span class='lbrace'>{</span>
    <span class='label'>update:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOR UPDATE</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span>
    <span class='label'>share:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>LOCK IN SHARE MODE</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='rbrace'>}</span>
<span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_hash-instance_method" title="#as_hash (instance method)">#<strong>as_hash</strong>(attribute = primary_key)  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns hash with all tuples being the key of each the provided attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#avg-instance_method" title="#avg (instance method)">#<strong>avg</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a result of SQL AVG clause.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count-instance_method" title="#count (instance method)">#<strong>count</strong>  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return relation count.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#distinct-instance_method" title="#distinct (instance method)">#<strong>distinct</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a copy of the relation with a SQL DISTINCT clause.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_batch-instance_method" title="#each_batch (instance method)">#<strong>each_batch</strong>(size: 1000) {|| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Process the dataset in batches.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exclude-instance_method" title="#exclude (instance method)">#<strong>exclude</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restrict a relation to not match criteria.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exist%3F-instance_method" title="#exist? (instance method)">#<strong>exist?</strong>(*args, &amp;block)  &#x21d2; TrueClass, FalseClass </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Checks whether a relation has at least one tuple.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exists-instance_method" title="#exists (instance method)">#<strong>exists</strong>(other, condition = nil)  &#x21d2; SQL::Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restrict with rows from another relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(pk)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch a tuple identified by the pk.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first-instance_method" title="#first (instance method)">#<strong>first</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get first tuple from the relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group-instance_method" title="#group (instance method)">#<strong>group</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Group by specific columns.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_and_count-instance_method" title="#group_and_count (instance method)">#<strong>group_and_count</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Group by specific columns and count by group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_append-instance_method" title="#group_append (instance method)">#<strong>group_append</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Group by more columns.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#having-instance_method" title="#having (instance method)">#<strong>having</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restrict a relation to match grouping criteria.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#invert-instance_method" title="#invert (instance method)">#<strong>invert</strong>  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Inverts the current WHERE and HAVING clauses.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#join-instance_method" title="#join (instance method)">#<strong>join</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
      (also: #inner_join)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Join with another relation using INNER JOIN.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last-instance_method" title="#last (instance method)">#<strong>last</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get last tuple from the relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#left_join-instance_method" title="#left_join (instance method)">#<strong>left_join</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Join with another relation using LEFT OUTER JOIN.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#limit-instance_method" title="#limit (instance method)">#<strong>limit</strong>(*args)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Limit a relation to a specific number of tuples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lock-instance_method" title="#lock (instance method)">#<strong>lock</strong>(**options, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Lock rows with in the specified mode.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#map-instance_method" title="#map (instance method)">#<strong>map</strong>(key = nil, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Map tuples from the relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#max-instance_method" title="#max (instance method)">#<strong>max</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a result of SQL MAX clause.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#min-instance_method" title="#min (instance method)">#<strong>min</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a result of SQL MIN clause.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#offset-instance_method" title="#offset (instance method)">#<strong>offset</strong>(num)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set offset for the relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#order-instance_method" title="#order (instance method)">#<strong>order</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set order for the relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pluck-instance_method" title="#pluck (instance method)">#<strong>pluck</strong>(*names)  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pluck values from a specific column.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefix-instance_method" title="#prefix (instance method)">#<strong>prefix</strong>(name = Inflector.singularize(schema.name.dataset))  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Prefix all columns in a relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#qualified-instance_method" title="#qualified (instance method)">#<strong>qualified</strong>(table_alias = nil)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Qualifies all columns in a relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#qualified_columns-instance_method" title="#qualified_columns (instance method)">#<strong>qualified_columns</strong>  &#x21d2; Array&lt;Symbol&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a list of qualified column names.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#query-instance_method" title="#query (instance method)">#<strong>query</strong>  &#x21d2; SQL::Attribute </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Turn a relation into a subquery.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(sql)  &#x21d2; SQL::Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a new relation from a raw SQL string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rename-instance_method" title="#rename (instance method)">#<strong>rename</strong>(options)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Rename columns in a relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reverse-instance_method" title="#reverse (instance method)">#<strong>reverse</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reverse the order of the relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#right_join-instance_method" title="#right_join (instance method)">#<strong>right_join</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Join with another relation using RIGHT JOIN.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-instance_method" title="#select (instance method)">#<strong>select</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
      (also: #project)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Select specific columns for select clause.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select_append-instance_method" title="#select_append (instance method)">#<strong>select_append</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Append specific columns to select clause.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select_group-instance_method" title="#select_group (instance method)">#<strong>select_group</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Select and group by specific columns.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sum-instance_method" title="#sum (instance method)">#<strong>sum</strong>(*args)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a result of SQL SUM clause.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unfiltered-instance_method" title="#unfiltered (instance method)">#<strong>unfiltered</strong>  &#x21d2; SQL::Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Discard restrictions in <code>WHERE</code> and <code>HAVING</code> clauses.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#union-instance_method" title="#union (instance method)">#<strong>union</strong>(relation, options = EMPTY_HASH, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Adds a UNION clause for relation dataset using second relation dataset.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unique%3F-instance_method" title="#unique? (instance method)">#<strong>unique?</strong>(criteria)  &#x21d2; TrueClass, FalseClass </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return if a restricted relation has 0 tuples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#where-instance_method" title="#where (instance method)">#<strong>where</strong>(*args, &amp;block)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restrict a relation to match criteria.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wrap-instance_method" title="#wrap (instance method)">#<strong>wrap</strong>(*names)  &#x21d2; Wrap </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Wrap other relations using association names.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="as_hash-instance_method">
  
    #<strong>as_hash</strong>(attribute = primary_key)  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns hash with all tuples being
the key of each the provided attribute</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>default use primary_key</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_as_hash'>as_hash</span>
<span class='comment'># {1 =&gt; {id: 1, name: &#39;Jane&#39;}}</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>using other attribute</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_as_hash'>as_hash</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
<span class='comment'># {&#39;Jane&#39; =&gt; {id: 1, name: &#39;Jane&#39;}}</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


982
983
984</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 982</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as_hash'>as_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span> <span class='op'>=</span> <span class='id identifier rubyid_primary_key'>primary_key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_as_hash'>as_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="avg-instance_method">
  
    #<strong>avg</strong>(*args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a result of SQL AVG clause.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_avg'>avg</span><span class='lparen'>(</span><span class='symbol'>:age</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Number</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_avg'>avg</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count-instance_method">
  
    #<strong>count</strong>  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return relation count</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
<span class='comment'># =&gt; 12</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_count'>count</span>
  <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="distinct-instance_method">
  
    
      <span class="overload">#<strong>distinct</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>distinct</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a copy of the relation with a SQL DISTINCT clause.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>distinct</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Create a distinct statement from column names</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_distinct'>distinct</span><span class='lparen'>(</span><span class='symbol'>:country</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>distinct</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Create a distinct statement from a block</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_distinct'>distinct</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_func'>func</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='comment'># SELECT DISTINCT ON (count(&quot;id&quot;)) &quot;id&quot; ...</span></code></pre>
    
  </div>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_distinct'>distinct</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_batch-instance_method">
  
    #<strong>each_batch</strong>(size: 1000) {|| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Process the dataset in batches.
The method yields a relation restricted by a primary key value.
This means it discards any order internally and uses the PK sort.
Currently, works only with a single-column primary key.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>update in batches</p>
</div></p>
      
      <pre class="example code"><code>users.each_batch do |rel|
  rel.
    command(:update).
    call(name: users[:first_name].concat(users[:last_name])
end</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>[Integer]</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'></span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 945</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_batch'>each_batch</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='int'>1000</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pks'>pks</span> <span class='op'>=</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_primary_key'>primary_key</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_pks'>pks</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Composite primary keys are not supported yet</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='id identifier rubyid_pks'>pks</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rel'>rel</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>

  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_ids'>ids</span> <span class='op'>=</span> <span class='id identifier rubyid_rel'>rel</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='id identifier rubyid_primary_key'>primary_key</span><span class='rparen'>)</span>

    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_rel'>rel</span><span class='rparen'>)</span>

    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_size'>size</span>

    <span class='id identifier rubyid_rel'>rel</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_pks'>pks</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exclude-instance_method">
  
    #<strong>exclude</strong>(*args, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Restrict a relation to not match criteria</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_exclude'>exclude</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Jane</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with conditions for exclusion</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


384
385
386</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 384</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exclude'>exclude</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exist?-instance_method">
  
    #<strong>exist?</strong>(*args, &amp;block)  &#x21d2; <tt>TrueClass</tt>, <tt>FalseClass</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Checks whether a relation has at least one tuple</p>

<p>@example
   users.where(name: &#39;John&#39;).exist? # =&gt; true</p>

<p>users.exist?(name: &#39;Klaus&#39;) # =&gt; false</p>

<p>users.exist? { name.is(&#39;klaus&#39;) } # =&gt; false</p>

<p>@param [Array<Object>] args Optional restrictions to filter the relation
  @yield An optional block filters the relation using <code>where DSL</code></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>TrueClass</tt>, <tt>FalseClass</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


839
840
841</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 839</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exists-instance_method">
  
    #<strong>exists</strong>(other, condition = nil)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Restrict with rows from another relation.
Accepts only SQL relations and uses the EXISTS
clause under the hood</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>using associations</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_exists'>exists</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>using provided condition</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_exists'>exists</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='comma'>,</span> <span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>other</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The other relation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>condition</span>
      
      
        <span class='type'>(<tt>Hash</tt>, <tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An optional join condition</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


924
925
926
927</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 924</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exists'>exists</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='comma'>,</span> <span class='id identifier rubyid_condition'>condition</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_join_condition'>join_condition</span> <span class='op'>=</span> <span class='id identifier rubyid_condition'>condition</span> <span class='op'>||</span> <span class='id identifier rubyid_associations'>associations</span><span class='lbracket'>[</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join_keys'>join_keys</span>
  <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_join_condition'>join_condition</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_exists'>exists</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch-instance_method">
  
    #<strong>fetch</strong>(pk)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch a tuple identified by the pk</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='comment'># {:id =&gt; 1, name: &quot;Jane&quot;}</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ROM::TupleCountMismatchError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When 0 or more than 1 tuples were found</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_pk'>pk</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_by_pk'>by_pk</span><span class='lparen'>(</span><span class='id identifier rubyid_pk'>pk</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_one!'>one!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first-instance_method">
  
    #<strong>first</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get first tuple from the relation</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1, :name =&gt; &quot;Jane&quot;}</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group-instance_method">
  
    
      <span class="overload">#<strong>group</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>group</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>group</strong>(*attributes, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Group by specific columns</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>group</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation grouped by provided columns</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='symbol'>:user_id</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>group</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation grouped by provided schema attributes</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">SQL::Attribute</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with relation attributes</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>group</strong>(*attributes, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation grouped by provided attributes from a block</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_title'>title</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span> <span class='rbrace'>}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt>Array&lt;SQL::Attributes&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with relation attributes</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


713
714
715
716
717
718
719
720
721
722
723</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 713</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_canonical'>canonical</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_canonical'>canonical</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_and_count-instance_method">
  
    #<strong>group_and_count</strong>(*args, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Group by specific columns and count by group</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_group_and_count'>group_and_count</span><span class='lparen'>(</span><span class='symbol'>:user_id</span><span class='rparen'>)</span>
<span class='comment'># =&gt; [{ user_id: 1, count: 2 }, { user_id: 2, count: 3 }]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of column names</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


775
776
777</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 775</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group_and_count'>group_and_count</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_append-instance_method">
  
    
      <span class="overload">#<strong>group_append</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>group_append</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>group_append</strong>(*attributes, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Group by more columns</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>group_append</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation grouped by provided columns</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='symbol'>:user_id</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>group_append</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation grouped by provided schema attributes</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>
    
  </div>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>group_append</strong>(*attributes, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation grouped by provided schema attributes from a block</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span> <span class='rbrace'>}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">SQL::Attribute</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


752
753
754
755
756
757
758
759
760
761
762</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 752</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_canonical'>canonical</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_group_append'>group_append</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="having-instance_method">
  
    
      <span class="overload">#<strong>having</strong>(conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>having</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Restrict a relation to match grouping criteria</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>having</strong>(conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation with having clause from conditions hash</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span>
  <span class='id identifier rubyid_qualified'>qualified</span><span class='period'>.</span>
  <span class='id identifier rubyid_left_join'>left_join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span><span class='period'>.</span>
  <span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_integer'>integer</span><span class='op'>::</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='symbol'>:tasks__id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='symbol'>:task_count</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span>
  <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='rparen'>)</span><span class='period'>.</span>
  <span class='id identifier rubyid_having'>having</span><span class='lparen'>(</span><span class='label'>task_count:</span> <span class='int'>2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1, :name =&gt; &quot;Jane&quot;, :task_count =&gt; 2}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with conditions</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>having</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation with having clause created from restriction DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span>
  <span class='id identifier rubyid_qualified'>qualified</span><span class='period'>.</span>
  <span class='id identifier rubyid_left_join'>left_join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span><span class='period'>.</span>
  <span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_integer'>integer</span><span class='op'>::</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='symbol'>:tasks__id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='symbol'>:task_count</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span>
  <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='rparen'>)</span><span class='period'>.</span>
  <span class='id identifier rubyid_having'>having</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='rparen'>)</span> <span class='op'>&gt;=</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='period'>.</span>
  <span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1, :name =&gt; &quot;Jane&quot;, :task_count =&gt; 2}</span></code></pre>
    
  </div>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


421
422
423
424
425
426
427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 421</span>

<span class='kw'>def</span> <span class='id identifier rubyid_having'>having</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_having'>having</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_canonical'>canonical</span><span class='period'>.</span><span class='id identifier rubyid_restriction'>restriction</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="invert-instance_method">
  
    #<strong>invert</strong>  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Inverts the current WHERE and HAVING clauses. If there is neither a
WHERE or HAVING clause, adds a WHERE clause that is always false.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_exclude'>exclude</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Jane</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_invert'>invert</span>

<span class='comment'># this is the same as:
</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Jane</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


441
442
443</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 441</span>

<span class='kw'>def</span> <span class='id identifier rubyid_invert'>invert</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_invert'>invert</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="join-instance_method">
  
    
      <span class="overload">#<strong>join</strong>(dataset, join_conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>join</strong>(dataset, join_conditions, options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>join</strong>(relation)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>join</strong>(relation, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='inner_join-instance_method'>inner_join</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Join with another relation using INNER JOIN</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>join</strong>(dataset, join_conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Join with another relation using dataset name and join conditions</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='symbol'>:user_id</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Join table name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>join_conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with join conditions</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>join</strong>(dataset, join_conditions, options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Join with another relation using dataset name and join conditions
with additional join options</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='symbol'>:user_id</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>table_alias:</span> <span class='symbol'>:tasks_1</span> <span class='rbrace'>}</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Join table name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>join_conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with join conditions</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional join options</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>join</strong>(relation)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Join with another relation</p>

<p>Join conditions are automatically set based on schema association</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A relation for join</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>join</strong>(relation, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Join with another relation using DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='label'>users:</span><span class='comma'>,</span> <span class='label'>tasks:</span><span class='op'>|</span>
  <span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is'>is</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is'>is</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>John</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='rbrace'>}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A relation for join</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 581</span>

<span class='kw'>def</span> <span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid___join__'>__join__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last-instance_method">
  
    #<strong>last</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get last tuple from the relation</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
<span class='comment'># {:id =&gt; 2, :name =&gt; &quot;Joe&quot;}</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last'>last</span>
  <span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="left_join-instance_method">
  
    
      <span class="overload">#<strong>left_join</strong>(dataset, left_join_conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>left_join</strong>(dataset, left_join_conditions, options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>left_join</strong>(relation)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>join</strong>(relation, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Join with another relation using LEFT OUTER JOIN</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>left_join</strong>(dataset, left_join_conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Left_Join with another relation using dataset name and left_join conditions</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_left_join'>left_join</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='symbol'>:user_id</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Left_Join table name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>left_join_conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with left_join conditions</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>left_join</strong>(dataset, left_join_conditions, options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Left_Join with another relation using dataset name and left_join conditions
with additional left_join options</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_left_join'>left_join</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='symbol'>:user_id</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>table_alias:</span> <span class='symbol'>:tasks_1</span> <span class='rbrace'>}</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Left_Join table name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>left_join_conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with left_join conditions</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional left_join options</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>left_join</strong>(relation)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Left_Join with another relation</p>

<p>Left_Join conditions are automatically set based on schema association</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_left_join'>left_join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A relation for left_join</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>join</strong>(relation, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Join with another relation using DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_left_join'>left_join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='label'>users:</span><span class='comma'>,</span> <span class='label'>tasks:</span><span class='op'>|</span>
  <span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is'>is</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is'>is</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>John</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='rbrace'>}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A relation for left_join</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


631
632
633</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 631</span>

<span class='kw'>def</span> <span class='id identifier rubyid_left_join'>left_join</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid___join__'>__join__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="limit-instance_method">
  
    
      <span class="overload">#<strong>limit</strong>(num)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>limit</strong>(num, offset)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Limit a relation to a specific number of tuples</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>limit</strong>(num)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation with the limit set to the provided num</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The limit value</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>limit</strong>(num, offset)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation with the limit set to the provided num</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>10</span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The limit value</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>offset</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The offset value</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


518
519
520</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 518</span>

<span class='kw'>def</span> <span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lock-instance_method">
  
    
      <span class="overload">#<strong>lock</strong>(options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>lock</strong>(options) {|relation| ... } &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Lock rows with in the specified mode. Check out ROW_LOCK_MODES for the
list of supported modes, keep in mind available lock modes heavily depend on
the database type+version you&#39;re running on.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>lock</strong>(options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:mode</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Lock mode</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:wait</span>
          <span class="type">(<tt>Boolean</tt>, <tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Controls the (NO)WAIT part</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:skip_locked</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Skip locked rows</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:of</span>
          <span class="type">(<tt>Array</tt>, <tt>Symbol</tt>, <tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>List of objects in the OF part</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>lock</strong>(options) {|relation| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Runs the block inside a transaction. The relation will be materialized
and passed inside the block so that the lock will be acquired right before
the block gets executed.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The same options as for the version without a block</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


896
897
898
899
900
901
902
903
904
905
906</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 896</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lock'>lock</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_clause'>clause</span> <span class='op'>=</span> <span class='id identifier rubyid_lock_clause'>lock_clause</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_lock_style'>lock_style</span><span class='lparen'>(</span><span class='id identifier rubyid_clause'>clause</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_lock_style'>lock_style</span><span class='lparen'>(</span><span class='id identifier rubyid_clause'>clause</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="map-instance_method">
  
    #<strong>map</strong>(key = nil, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Map tuples from the relation</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='comment'># [1, 2, 3]
</span>
<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='comment'># [1, 2, 3]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An optional name of the key for extracting values
from tuples</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span>
    <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="max-instance_method">
  
    #<strong>max</strong>(*args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a result of SQL MAX clause.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='lparen'>(</span><span class='symbol'>:age</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Number</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 316</span>

<span class='kw'>def</span> <span class='id identifier rubyid_max'>max</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="min-instance_method">
  
    #<strong>min</strong>(*args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a result of SQL MIN clause.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='lparen'>(</span><span class='symbol'>:age</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Number</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


302
303
304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 302</span>

<span class='kw'>def</span> <span class='id identifier rubyid_min'>min</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="offset-instance_method">
  
    #<strong>offset</strong>(num)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set offset for the relation</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_offset'>offset</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The offset value</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


532
533
534</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 532</span>

<span class='kw'>def</span> <span class='id identifier rubyid_offset'>offset</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='id identifier rubyid_num'>num</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="order-instance_method">
  
    
      <span class="overload">#<strong>order</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>order</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>order</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set order for the relation</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>order</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation ordered by provided columns (ASC by default)</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>order</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation ordered by provided schema attributes</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">SQL::Attribute</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with schema attributes</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>order</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return a new relation ordered using order DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>using attribute</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_price'>price</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='lparen'>(</span><span class='label'>nulls:</span> <span class='symbol'>:first</span><span class='rparen'>)</span> <span class='rbrace'>}</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>using a function</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_nullif'>nullif</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='comma'>,</span> <span class='backtick'>`</span><span class='tstring_content'>&#39;&#39;</span><span class='tstring_end'>`</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_desc'>desc</span><span class='lparen'>(</span><span class='label'>nulls:</span> <span class='symbol'>:first</span><span class='rparen'>)</span> <span class='rbrace'>}</span></code></pre>
    
  </div>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


476
477
478
479
480
481
482</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 476</span>

<span class='kw'>def</span> <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_canonical'>canonical</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pluck-instance_method">
  
    #<strong>pluck</strong>(*names)  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Pluck values from a specific column</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Single value</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
<span class='comment'># [1, 2]</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Multiple values</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span>
<span class='comment'># [[1, &quot;Jane&quot;] [2, &quot;Joe&quot;]]</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>:</span> <span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prefix-instance_method">
  
    #<strong>prefix</strong>(name = Inflector.singularize(schema.name.dataset))  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Prefix all columns in a relation</p>

<p>This method is intended to be used internally within a relation object</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_prefix'>prefix</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='comment'># {:user_id =&gt; 1, :user_name =&gt; &quot;Jane&quot;}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Inflector.singularize(schema.name.dataset)</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The prefix</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='const'>Inflector</span><span class='period'>.</span><span class='id identifier rubyid_singularize'>singularize</span><span class='lparen'>(</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_prefix'>prefix</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="qualified-instance_method">
  
    #<strong>qualified</strong>(table_alias = nil)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Qualifies all columns in a relation</p>

<p>This method is intended to be used internally within a relation object</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_sql'>sql</span>
<span class='comment'># SELECT &quot;users&quot;.&quot;id&quot;, &quot;users&quot;.&quot;name&quot; ...</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_qualified'>qualified</span><span class='lparen'>(</span><span class='id identifier rubyid_table_alias'>table_alias</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='lparen'>(</span><span class='id identifier rubyid_table_alias'>table_alias</span><span class='rparen'>)</span><span class='period'>.</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="qualified_columns-instance_method">
  
    #<strong>qualified_columns</strong>  &#x21d2; <tt>Array&lt;Symbol&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a list of qualified column names</p>

<p>This method is intended to be used internally within a relation object</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_qualified_columns'>qualified_columns</span>
<span class='comment'># [:users__id, :users__name]</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_qualified_columns'>qualified_columns</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sql_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="query-instance_method">
  
    #<strong>query</strong>  &#x21d2; <tt><span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">SQL::Attribute</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Turn a relation into a subquery. Can be used
for selecting a column with a subquery or
restricting the result set with a IN (SELECT ...) condtion.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>adding number of user tasks</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span> <span class='op'>=</span> <span class='id identifier rubyid_relations'>relations</span><span class='lbracket'>[</span><span class='symbol'>:tasks</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='id identifier rubyid_relations'>relations</span><span class='lbracket'>[</span><span class='symbol'>:users</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_user_tasks'>user_tasks</span> <span class='op'>=</span> <span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is'>is</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tasks_count'>tasks_count</span> <span class='op'>=</span> <span class='id identifier rubyid_user_tasks'>user_tasks</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_integer'>integer</span><span class='op'>::</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select_append'>select_append</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks_count'>tasks_count</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='symbol'>:tasks_count</span><span class='rparen'>)</span><span class='rparen'>)</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">SQL::Attribute</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


998
999
1000
1001
1002</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 998</span>

<span class='kw'>def</span> <span class='id identifier rubyid_query'>query</span>
  <span class='id identifier rubyid_attr'>attr</span> <span class='op'>=</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_subquery'>subquery</span> <span class='op'>=</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span><span class='period'>.</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span>
  <span class='const'><span class='object_link'><a href="../../SQL.html" title="ROM::SQL (module)">SQL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">Attribute</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_attr'>attr</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_meta'>meta</span><span class='lparen'>(</span><span class='label'>sql_expr:</span> <span class='id identifier rubyid_subquery'>subquery</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read-instance_method">
  
    #<strong>read</strong>(sql)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a new relation from a raw SQL string</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT name FROM users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>sql</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The SQL string</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


871
872
873</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 871</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='id identifier rubyid_sql'>sql</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>schema:</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_empty'>empty</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rename-instance_method">
  
    #<strong>rename</strong>(options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Rename columns in a relation</p>

<p>This method is intended to be used internally within a relation object</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_rename'>rename</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='symbol'>:user_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1, :user_name =&gt; &quot;Jane&quot; }</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash&lt;Symbol=&gt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A name =&gt; new_name map</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rename'>rename</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_rename'>rename</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reverse-instance_method">
  
    #<strong>reverse</strong>(*args, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reverse the order of the relation</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


492
493
494</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 492</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reverse'>reverse</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="right_join-instance_method">
  
    
      <span class="overload">#<strong>right_join</strong>(dataset, right_join_conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>right_join</strong>(dataset, right_join_conditions, options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>right_join</strong>(relation)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>join</strong>(relation, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Join with another relation using RIGHT JOIN</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>right_join</strong>(dataset, right_join_conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Right_Join with another relation using dataset name and right_join conditions</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_right_join'>right_join</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='symbol'>:user_id</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Right_Join table name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>right_join_conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with right_join conditions</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>right_join</strong>(dataset, right_join_conditions, options)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Right_Join with another relation using dataset name and right_join conditions
with additional right_join options</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_right_join'>right_join</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='symbol'>:user_id</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>table_alias:</span> <span class='symbol'>:tasks_1</span> <span class='rbrace'>}</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Right_Join table name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>right_join_conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with right_join conditions</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional right_join options</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>right_join</strong>(relation)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Right_Join with another relation</p>

<p>Right_Join conditions are automatically set based on schema association</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_right_join'>right_join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A relation for right_join</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>join</strong>(relation, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Join with another relation using DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_right_join'>right_join</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='label'>users:</span><span class='comma'>,</span> <span class='label'>tasks:</span><span class='op'>|</span>
  <span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is'>is</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is'>is</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>John</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='rbrace'>}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A relation for right_join</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


680
681
682</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 680</span>

<span class='kw'>def</span> <span class='id identifier rubyid_right_join'>right_join</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid___join__'>__join__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="select-instance_method">
  
    
      <span class="overload">#<strong>select</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>select</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>select</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>select</strong>(*columns, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='project-instance_method'>project</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Select specific columns for select clause</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>select</strong>(*columns)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Project relation using column names</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>using column names</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1, :name =&gt; &quot;Jane&quot;}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of column names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>select</strong>(*attributes)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Project relation using schema attributes</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>using attributes</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1, :name =&gt; &quot;Jane&quot;}</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>using schema</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">SQL::Attribute</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of schema attributes</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>select</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Project relation using projection DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>using attributes</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='symbol'>:user_id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='comment'># {:user_id =&gt; 1}
</span>
<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='comment'># {:id =&gt; 1, :name =&gt; &quot;Jane&quot;}</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>using SQL functions</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_string'>string</span><span class='op'>::</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='symbol'>:uid</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:uid =&gt; &quot;1-Jane&quot;}</span></code></pre>
    
  </div>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>select</strong>(*columns, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Project relation using column names and projection DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>using attributes</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_integer'>integer</span><span class='op'>::</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='symbol'>:count</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='comment'># {:id =&gt; 1, :count =&gt; 1}
</span>
<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='comment'># {:id =&gt; 1, :name =&gt; &quot;Jane&quot;}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Attribute.html" title="ROM::SQL::Attribute (class)">SQL::Attribute</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of schema attributes</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='period'>.</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="select_append-instance_method">
  
    #<strong>select_append</strong>(*args, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Append specific columns to select clause</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#select-instance_method" title="ROM::SQL::Relation::Reading#select (method)">#select</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 250</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select_append'>select_append</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_canonical'>canonical</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="select_group-instance_method">
  
    #<strong>select_group</strong>(*args, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Select and group by specific columns</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_select_group'>select_group</span><span class='lparen'>(</span><span class='symbol'>:user_id</span><span class='rparen'>)</span>
<span class='comment'># =&gt; [{ user_id: 1 }, { user_id: 2 }]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of column names</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


790
791
792
793</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 790</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select_group'>select_group</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_schema'>new_schema</span> <span class='op'>=</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_schema'>new_schema</span><span class='period'>.</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_new_schema'>new_schema</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sum-instance_method">
  
    #<strong>sum</strong>(*args)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a result of SQL SUM clause.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='symbol'>:age</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with column names</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


288
289
290</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 288</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unfiltered-instance_method">
  
    #<strong>unfiltered</strong>  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Discard restrictions in <code>WHERE</code> and <code>HAVING</code> clauses</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>calling .by_pk has no effect</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_by_pk'>by_pk</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_unfiltered'>unfiltered</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">SQL::Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1012
1013
1014</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 1012</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unfiltered'>unfiltered</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="union-instance_method">
  
    #<strong>union</strong>(relation, options = EMPTY_HASH, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Adds a UNION clause for relation dataset using second relation dataset</p>

<p>@returRelation]</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_union'>union</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='int'>2</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='comment'># =&gt; [{ id: 1, name: &#39;Piotr&#39; }, { id: 2, name: &#39;Jane&#39; }]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relation</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Another relation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>EMPTY_HASH</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Options for union</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:alias</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Use the given value as the #from_self alias</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:all</span>
          <span class="type">(<tt>TrueClass</tt>, <tt>FalseClass</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Set to true to use UNION ALL instead of UNION, so duplicate rows can occur</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:from_self</span>
          <span class="type">(<tt>TrueClass</tt>, <tt>FalseClass</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Set to false to not wrap the returned dataset in a #from_self, use with care.</p>
</div>
          
        </li>
      
    </ul>
  
    
    


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


811
812
813
814
815
816
817
818
819
820
821
822</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 811</span>

<span class='kw'>def</span> <span class='id identifier rubyid_union'>union</span><span class='lparen'>(</span><span class='id identifier rubyid_relation'>relation</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='const'>EMPTY_HASH</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='comment'># We use the original relation name here if both relations have the
</span>  <span class='comment'># same name. This makes it so if the user at some point references
</span>  <span class='comment'># the relation directly by name later on things won&#39;t break in
</span>  <span class='comment'># confusing ways.
</span>  <span class='id identifier rubyid_same_relation'>same_relation</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_alias_name'>alias_name</span> <span class='op'>=</span>  <span class='id identifier rubyid_same_relation'>same_relation</span> <span class='op'>?</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>__</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>alias:</span> <span class='id identifier rubyid_alias_name'>alias_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_new_schema'>new_schema</span> <span class='op'>=</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_qualified'>qualified</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:alias</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_schema'>new_schema</span><span class='period'>.</span><span class='lparen'>(</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unique?-instance_method">
  
    #<strong>unique?</strong>(criteria)  &#x21d2; <tt>TrueClass</tt>, <tt>FalseClass</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return if a restricted relation has 0 tuples</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_unique?'>unique?</span><span class='lparen'>(</span><span class='label'>email:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jane@doe.org</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># true
</span>
<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='label'>email:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jane@doe.org</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_unique?'>unique?</span><span class='lparen'>(</span><span class='label'>email:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jane@doe.org</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># false</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>criteria</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The condition hash for WHERE clause</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>TrueClass</tt>, <tt>FalseClass</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


857
858
859</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 857</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unique?'>unique?</span><span class='lparen'>(</span><span class='id identifier rubyid_criteria'>criteria</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_criteria'>criteria</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="where-instance_method">
  
    
      <span class="overload">#<strong>where</strong>(conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>where</strong>(conditions, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>where</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Restrict a relation to match criteria</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>where</strong>(conditions)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Restrict a relation using a hash with conditions</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Jane</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>age:</span> <span class='int'>30</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with conditions</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>where</strong>(conditions, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Restrict a relation using a hash with conditions and restriction DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Jane</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_age'>age</span> <span class='op'>&gt;</span> <span class='int'>18</span> <span class='rbrace'>}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>conditions</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with conditions</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>where</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Restrict a relation using restriction DSL</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_age'>age</span> <span class='op'>&gt;</span> <span class='int'>18</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span> <span class='lbrace'>{</span> <span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&lt;</span> <span class='int'>10</span><span class='rparen'>)</span> <span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&gt;</span> <span class='int'>20</span><span class='rparen'>)</span> <span class='rbrace'>}</span></code></pre>
    
  </div>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Relation.html" title="ROM::SQL::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364
365
366
367
368
369
370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 362</span>

<span class='kw'>def</span> <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_canonical'>canonical</span><span class='period'>.</span><span class='id identifier rubyid_restriction'>restriction</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_coerce_conditions'>coerce_conditions</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wrap-instance_method">
  
    #<strong>wrap</strong>(*names)  &#x21d2; <tt><span class='object_link'><a href="../Wrap.html" title="ROM::SQL::Wrap (class)">Wrap</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Wrap other relations using association names</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='symbol'>:owner</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>names</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with association identifiers</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Wrap.html" title="ROM::SQL::Wrap (class)">Wrap</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1026
1027
1028
1029</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/sql/relation/reading.rb', line 1026</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_others'>others</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_associations'>associations</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_wrapped'>wrapped</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_wrap_around'>wrap_around</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Jan 25 19:47:35 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.6.5).
</div>

    </div>
  </body>
</html>