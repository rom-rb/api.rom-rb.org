<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ROM::Relation
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ROM::Relation";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span>
     &raquo; 
    <span class="title">Relation</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ROM::Relation
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ROM::Relation</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>Dry::Core::ClassAttributes, <span class='object_link'><a href="Relation/ClassInterface.html" title="ROM::Relation::ClassInterface (module)">ClassInterface</a></span></dd>
  </dl>
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Relation/Commands.html" title="ROM::Relation::Commands (module)">Commands</a></span>, <span class='object_link'><a href="Relation/Materializable.html" title="ROM::Relation::Materializable (module)">Materializable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>core/lib/rom/relation.rb<span class="defines">,<br />
  core/lib/rom/relation/name.rb,<br /> core/lib/rom/relation/wrap.rb,<br /> core/lib/rom/relation/graph.rb,<br /> core/lib/rom/relation/loaded.rb,<br /> core/lib/rom/relation/curried.rb,<br /> core/lib/rom/relation/combined.rb,<br /> core/lib/rom/relation/commands.rb,<br /> core/lib/rom/relation/view_dsl.rb,<br /> core/lib/rom/relation/composite.rb,<br /> core/lib/rom/relation/materializable.rb,<br /> core/lib/rom/relation/class_interface.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Base relation class</p>

<p>Relation is a proxy for the dataset object provided by the gateway. It
can forward methods to the dataset, which is why the &quot;native&quot; interface of
the underlying gateway is available in the relation</p>

<p>Individual adapters sets up their relation classes and provide different APIs
depending on their persistence backend.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Memory/Relation.html" title="ROM::Memory::Relation (class)">Memory::Relation</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Relation/ClassInterface.html" title="ROM::Relation::ClassInterface (module)">ClassInterface</a></span>, <span class='object_link'><a href="Relation/Commands.html" title="ROM::Relation::Commands (module)">Commands</a></span>, <span class='object_link'><a href="Relation/Materializable.html" title="ROM::Relation::Materializable (module)">Materializable</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Relation/Combined.html" title="ROM::Relation::Combined (class)">Combined</a></span>, <span class='object_link'><a href="Relation/Composite.html" title="ROM::Relation::Composite (class)">Composite</a></span>, <span class='object_link'><a href="Relation/Curried.html" title="ROM::Relation::Curried (class)">Curried</a></span>, <span class='object_link'><a href="Relation/Graph.html" title="ROM::Relation::Graph (class)">Graph</a></span>, <span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Loaded</a></span>, <span class='object_link'><a href="Relation/ViewDSL.html" title="ROM::Relation::ViewDSL (class)">ViewDSL</a></span>, <span class='object_link'><a href="Relation/Wrap.html" title="ROM::Relation::Wrap (class)">Wrap</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="NOOP_OUTPUT_SCHEMA-constant" class="">NOOP_OUTPUT_SCHEMA =
          <div class="docstring">
  <div class="discussion">
    <p>Default no-op output schema which is called in <code>Relation#each</code></p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_tuple'>tuple</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_tuple'>tuple</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#dataset-instance_method" title="#dataset (instance method)">#<strong>dataset</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Dataset used by the relation provided by relation&#39;s gateway.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#mappers-instance_method" title="#mappers (instance method)">#<strong>mappers</strong>  &#x21d2; MapperRegistry </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>An optional mapper registry (empty by default).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The relation name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#schema-instance_method" title="#schema (instance method)">#<strong>schema</strong>  &#x21d2; Schema </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Relation schema, defaults to class-level canonical schema (if it was defined) and sets an empty one as the fallback.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#struct_namespace-instance_method" title="#struct_namespace (instance method)">#<strong>struct_namespace</strong>(ns)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a new relation configured with the provided struct namespace.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-class_method" title="#[] (class method)">.<strong>[]</strong>(adapter)  &#x21d2; Class </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#[]-class_method" title="ROM::Relation::ClassInterface#[] (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return adapter-specific relation subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_map-class_method" title="auto_map (class method)">.<strong>auto_map</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not a relation and its compositions should be auto-mapped.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_struct-class_method" title="auto_struct (class method)">.<strong>auto_struct</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not tuples should be auto-mapped to structs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dataset-class_method" title="#dataset (class method)">.<strong>dataset</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#dataset-class_method" title="ROM::Relation::ClassInterface#dataset (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set or get custom dataset block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#forward-class_method" title="#forward (class method)">.<strong>forward</strong>(*methods)  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#forward-class_method" title="ROM::Relation::ClassInterface#forward (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Dynamically define a method that will forward to the dataset and wrap response in the relation itself.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gateway-class_method" title="gateway (class method)">.<strong>gateway</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Manage the gateway.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#relation_name-class_method" title="#relation_name (class method)">.<strong>relation_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#relation_name-class_method" title="ROM::Relation::ClassInterface#relation_name (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>!@attribute [r] relation_name   @return [Name] Qualified relation name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schema-class_method" title="#schema (class method)">.<strong>schema</strong>(dataset = nil, as: nil, infer: false, &amp;block)  &#x21d2; Schema </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#schema-class_method" title="ROM::Relation::ClassInterface#schema (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specify canonical schema for a relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#struct_namespace-class_method" title="struct_namespace (class method)">.<strong>struct_namespace</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get or set a namespace for auto-generated struct classes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use-class_method" title="#use (class method)">.<strong>use</strong>(plugin, options = EMPTY_HASH)  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#use-class_method" title="ROM::Relation::ClassInterface#use (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Include a registered plugin in this relation class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#view-class_method" title="#view (class method)">.<strong>view</strong>(*args, &amp;block)  &#x21d2; Symbol </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#view-class_method" title="ROM::Relation::ClassInterface#view (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Define a relation view with a specific schema.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(name)  &#x21d2; Attribute </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return schema attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as-instance_method" title="#as (instance method)">#<strong>as</strong>(aliaz)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a new relation with an aliased name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#associations-instance_method" title="#associations (instance method)">#<strong>associations</strong>  &#x21d2; AssociationSet </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return schema&#39;s association set (empty by default).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>  &#x21d2; Relation::Loaded </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads a relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#combine-instance_method" title="#combine (instance method)">#<strong>combine</strong>(*args)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Combine with other relations using configured associations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#combine_with-instance_method" title="#combine_with (instance method)">#<strong>combine_with</strong>(*others)  &#x21d2; Relation::Graph </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Composes with other relations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#command-instance_method" title="#command (instance method)">#<strong>command</strong>(type, mapper: nil, use: EMPTY_ARRAY, **opts)  &#x21d2; ROM::Command </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Relation/Commands.html#command-instance_method" title="ROM::Relation::Commands#command (method)">Commands</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a command for the relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong> {|Hash| ... } &#x21d2; Enumerator </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Yields relation tuples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eager_load-instance_method" title="#eager_load (instance method)">#<strong>eager_load</strong>(assoc)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a graph node prepared by the given association.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first-instance_method" title="#first (instance method)">#<strong>first</strong>  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Relation/Materializable.html#first-instance_method" title="ROM::Relation::Materializable#first (method)">Materializable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return first tuple from a relation coerced to an array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#map_to-instance_method" title="#map_to (instance method)">#<strong>map_to</strong>(klass, **opts)  &#x21d2; Relation::Composite </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a new relation that will map its tuples to instance of the provided class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#map_with-instance_method" title="#map_with (instance method)">#<strong>map_with</strong>(*names, **opts)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Maps the wrapped relation with other mappers available in the registry.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-instance_method" title="#new (instance method)">#<strong>new</strong>(dataset, new_opts = EMPTY_HASH)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a new relation with provided dataset and additional options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#node-instance_method" title="#node (instance method)">#<strong>node</strong>(name)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a graph node for a given association identifier.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#one-instance_method" title="#one (instance method)">#<strong>one</strong>  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Relation/Materializable.html#one-instance_method" title="ROM::Relation::Materializable#one (method)">Materializable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Delegate to loaded relation and return one object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#one!-instance_method" title="#one! (instance method)">#<strong>one!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Relation/Materializable.html#one!-instance_method" title="ROM::Relation::Materializable#one! (method)">Materializable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Delegate to loaded relation and return one object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schemas-instance_method" title="#schemas (instance method)">#<strong>schemas</strong>  &#x21d2; Hash&lt;Symbol=&gt;Schema&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return all registered relation schemas.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array&lt;Hash&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Materializes a relation into an array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_ast-instance_method" title="#to_ast (instance method)">#<strong>to_ast</strong>  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns AST for the wrapped relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with-instance_method" title="#with (instance method)">#<strong>with</strong>(opts)  &#x21d2; Relation </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a new instance with the same dataset but new options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wrap-instance_method" title="#wrap (instance method)">#<strong>wrap</strong>(*names)  &#x21d2; Wrap </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Wrap other relations using association names.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wrap_around-instance_method" title="#wrap_around (instance method)">#<strong>wrap_around</strong>(*others)  &#x21d2; Relation::Wrap </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Wrap around other relations.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="dataset-instance_method">
  
    #<strong>dataset</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns dataset used by the relation provided by relation&#39;s gateway.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>dataset used by the relation provided by relation&#39;s gateway</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 135</span>

<span class='id identifier rubyid_param'>param</span> <span class='symbol'>:dataset</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="mappers-instance_method">
  
    #<strong>mappers</strong>  &#x21d2; <tt><span class='object_link'><a href="MapperRegistry.html" title="ROM::MapperRegistry (class)">MapperRegistry</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns an optional mapper registry (empty by default).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MapperRegistry.html" title="ROM::MapperRegistry (class)">MapperRegistry</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>an optional mapper registry (empty by default)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 178</span>

<span class='id identifier rubyid_option'>option</span> <span class='symbol'>:mappers</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='const'><span class='object_link'><a href="MapperRegistry.html" title="ROM::MapperRegistry (class)">MapperRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The relation name.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The relation name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 147</span>

<span class='id identifier rubyid_option'>option</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span> <span class='op'>?</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_default_name'>default_name</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="schema-instance_method">
  
    #<strong>schema</strong>  &#x21d2; <tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns relation schema, defaults to class-level canonical
schema (if it was defined) and sets an empty one as
the fallback.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>relation schema, defaults to class-level canonical
schema (if it was defined) and sets an empty one as
the fallback</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 142</span>

<span class='id identifier rubyid_option'>option</span> <span class='symbol'>:schema</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_default_schema'>default_schema</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="struct_namespace-instance_method">
  
    #<strong>struct_namespace</strong>(ns)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a new relation configured with the provided struct namespace</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ns</span>
      
      
        <span class='type'>(<tt>Module</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Custom namespace module for auto-structs</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 174</span>

<span class='id identifier rubyid_option'>option</span> <span class='symbol'>:struct_namespace</span><span class='comma'>,</span> <span class='label'>reader:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_struct_namespace'>struct_namespace</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-class_method">
  
    .<strong>[]</strong>(adapter)  &#x21d2; <tt>Class</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#[]-class_method" title="ROM::Relation::ClassInterface#[] (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return adapter-specific relation subclass</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:memory</span><span class='rbracket'>]</span>
<span class='comment'># =&gt; ROM::Memory::Relation</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="auto_map-class_method">
  
    
      <span class="overload">.<strong>auto_map</strong>  &#x21d2; <tt>Boolean</tt> </span>
    
      <span class="overload">.<strong>auto_map</strong>(value)  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Whether or not a relation and its compositions should be auto-mapped</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">.<strong>auto_map</strong>  &#x21d2; <tt>Boolean</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return auto_map setting value</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>auto_map</strong>(value)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Set auto_map value</p>


  </div>
</div>
<div class="tags">
  

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 82</span>

<span class='id identifier rubyid_defines'>defines</span> <span class='symbol'>:auto_map</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="auto_struct-class_method">
  
    
      <span class="overload">.<strong>auto_struct</strong>  &#x21d2; <tt>Boolean</tt> </span>
    
      <span class="overload">.<strong>auto_struct</strong>(value)  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Whether or not tuples should be auto-mapped to structs</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">.<strong>auto_struct</strong>  &#x21d2; <tt>Boolean</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return auto_struct setting value</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>auto_struct</strong>(value)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Set auto_struct value</p>


  </div>
</div>
<div class="tags">
  

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 93</span>

<span class='id identifier rubyid_defines'>defines</span> <span class='symbol'>:auto_struct</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dataset-class_method">
  
    .<strong>dataset</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#dataset-class_method" title="ROM::Relation::ClassInterface#dataset (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set or get custom dataset block</p>

<p>This block will be evaluated when a relation is instantiated and registered
in a relation registry.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:memory</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_dataset'>dataset</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="forward-class_method">
  
    .<strong>forward</strong>(*methods)  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#forward-class_method" title="ROM::Relation::ClassInterface#forward (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Dynamically define a method that will forward to the dataset and wrap
response in the relation itself</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>SomeAdapterRelation</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span>
  <span class='id identifier rubyid_forward'>forward</span> <span class='symbol'>:super_query</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gateway-class_method">
  
    
      <span class="overload">.<strong>gateway</strong>  &#x21d2; <tt>Symbol</tt> </span>
    
      <span class="overload">.<strong>gateway</strong>(gateway_key)  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Manage the gateway</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">.<strong>gateway</strong>  &#x21d2; <tt>Symbol</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Return the gateway key that the relation is associated with</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>gateway</strong>(gateway_key)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Link the relation to a gateway. Change this setting if the
relation is defined on a non-default gateway</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_gateway'>gateway</span> <span class='symbol'>:custom</span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>gateway_key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 71</span>

<span class='id identifier rubyid_defines'>defines</span> <span class='symbol'>:gateway</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relation_name-class_method">
  
    .<strong>relation_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#relation_name-class_method" title="ROM::Relation::ClassInterface#relation_name (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>!@attribute [r] relation_name
  @return [Name] Qualified relation name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../ROM.html#MissingSchemaError-constant" title="ROM::MissingSchemaError (constant)">MissingSchemaError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schema-class_method">
  
    .<strong>schema</strong>(dataset = nil, as: nil, infer: false, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#schema-class_method" title="ROM::Relation::ClassInterface#schema (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specify canonical schema for a relation</p>

<p>With a schema defined commands will set up a type-safe input handler
automatically</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_schema'>schema</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_attribute'>attribute</span> <span class='symbol'>:id</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Types.html" title="ROM::Types (module)">Types</a></span></span><span class='op'>::</span><span class='const'>Serial</span>
    <span class='id identifier rubyid_attribute'>attribute</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Types.html" title="ROM::Types (module)">Types</a></span></span><span class='op'>::</span><span class='const'>String</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># access schema from a finalized relation
</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An optional dataset name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>infer</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether to do an automatic schema inferring</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="struct_namespace-class_method">
  
    
      <span class="overload">.<strong>struct_namespace</strong>  &#x21d2; <tt>Module</tt> </span>
    
      <span class="overload">.<strong>struct_namespace</strong>(namespace)  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get or set a namespace for auto-generated struct classes.
By default, new struct classes are created within ROM::Struct</p>

<p>@example using custom namespace
   class Users &lt; ROM::Relation[:sql]
     struct_namespace Entities
   end</p>

<p>users.by_pk(1).one! # =&gt; #<Entities::User id=1 name="Jane Doe"></p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">.<strong>struct_namespace</strong>  &#x21d2; <tt>Module</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Returns Default struct namespace.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Module</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Default struct namespace</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">.<strong>struct_namespace</strong>(namespace)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>namespace</span>
      
      
        <span class='type'>(<tt>Module</tt>)</span>
      
      
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 112</span>

<span class='id identifier rubyid_defines'>defines</span> <span class='symbol'>:struct_namespace</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use-class_method">
  
    .<strong>use</strong>(plugin, options = EMPTY_HASH)  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#use-class_method" title="ROM::Relation::ClassInterface#use (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Include a registered plugin in this relation class</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>plugin</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>EMPTY_HASH</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:adapter</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>:default</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>first adapter to check for plugin</p>
</div>
          
        </li>
      
    </ul>
  


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="view-class_method">
  
    
      <span class="overload">#<strong>view</strong>(name, schema, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
    
      <span class="overload">#<strong>view</strong>(name, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
    
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#view-class_method" title="ROM::Relation::ClassInterface#view (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Define a relation view with a specific schema</p>

<p>This method should only be used in cases where a given adapter doesn&#39;t
support automatic schema projection at run-time.</p>

<p><strong>It&#39;s not needed in rom-sql</strong></p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>view</strong>(name, schema, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>View with the canonical schema</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:listing</span><span class='comma'>,</span> <span class='id identifier rubyid_schema'>schema</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>View with a projected schema</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:listing</span><span class='comma'>,</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>view</strong>(name, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>View with the canonical schema and arguments</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:by_name</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>View with projected schema and arguments</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:by_name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_schema'>schema</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_relation'>relation</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>View with a schema extended with foreign attributes</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:index</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_schema'>schema</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_append'>append</span><span class='lparen'>(</span><span class='id identifier rubyid_relations'>relations</span><span class='lbracket'>[</span><span class='symbol'>:tasks</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_relation'>relation</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>view method name</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    #<strong>[]</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="Attribute.html" title="ROM::Attribute (class)">Attribute</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return schema attribute</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>accessing canonical attribute</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
<span class='comment'># =&gt; #&lt;ROM::SQL::Attribute[Integer] primary_key=true name=:id source=ROM::Relation::Name(users)&gt;</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>accessing joined attribute</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks_with_users'>tasks_with_users</span> <span class='op'>=</span> <span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select_append'>select_append</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tasks_with_users'>tasks_with_users</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='comma'>,</span> <span class='symbol'>:tasks</span><span class='rbracket'>]</span>
<span class='comment'># =&gt; #&lt;ROM::SQL::Attribute[String] primary_key=false name=:title source=ROM::Relation::Name(tasks)&gt;</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Attribute.html" title="ROM::Attribute (class)">Attribute</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 204</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="as-instance_method">
  
    #<strong>as</strong>(aliaz)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a new relation with an aliased name</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='symbol'>:people</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>aliaz</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Aliased name</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


561
562
563</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 561</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='id identifier rubyid_aliaz'>aliaz</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_with'>with</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='id identifier rubyid_aliaz'>aliaz</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="associations-instance_method">
  
    #<strong>associations</strong>  &#x21d2; <tt><span class='object_link'><a href="AssociationSet.html" title="ROM::AssociationSet (class)">AssociationSet</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return schema&#39;s association set (empty by default)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="AssociationSet.html" title="ROM::AssociationSet (class)">AssociationSet</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Schema&#39;s association set (empty by default)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 459</span>

<span class='kw'>def</span> <span class='id identifier rubyid_associations'>associations</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_associations'>associations</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="call-instance_method">
  
    #<strong>call</strong>  &#x21d2; <tt><span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Relation::Loaded</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Loads a relation</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Relation::Loaded</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 351</span>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>
  <span class='const'><span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Loaded</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Relation/Loaded.html#new-instance_method" title="ROM::Relation::Loaded#new (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="combine-instance_method">
  
    
      <span class="overload">#<strong>combine</strong>(*associations)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>combine</strong>(*associations, **nested_associations)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>combine</strong>(associations)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Combine with other relations using configured associations</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>combine</strong>(*associations)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_combine'>combine</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='symbol'>:posts</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>*associations</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of association names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>combine</strong>(*associations, **nested_associations)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_combine'>combine</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='comma'>,</span> <span class='label'>posts:</span> <span class='symbol'>:authors</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>*associations</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of association names</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>*nested_associations</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with nested association names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>combine</strong>(associations)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>users.combine(posts: [:authors, reviews: [:tags, comments: :author])</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>*associations</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with nested association names</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 251</span>

<span class='kw'>def</span> <span class='id identifier rubyid_combine'>combine</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_combine_with'>combine_with</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_nodes'>nodes</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="combine_with-instance_method">
  
    #<strong>combine_with</strong>(*others)  &#x21d2; <tt><span class='object_link'><a href="Relation/Graph.html" title="ROM::Relation::Graph (class)">Relation::Graph</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Composes with other relations</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>others</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The other relation(s) to compose with</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Relation/Graph.html" title="ROM::Relation::Graph (class)">Relation::Graph</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_combine_with'>combine_with</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Relation/Combined.html" title="ROM::Relation::Combined (class)">Combined</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Relation/Combined.html#new-class_method" title="ROM::Relation::Combined.new (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="command-instance_method">
  
    #<strong>command</strong>(type, mapper: nil, use: EMPTY_ARRAY, **opts)  &#x21d2; <tt><span class='object_link'><a href="Command.html" title="ROM::Command (class)">ROM::Command</a></span></tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/Commands.html#command-instance_method" title="ROM::Relation::Commands#command (method)">Commands</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a command for the relation</p>

<p>This method can either return an existing custom command identified
by <code>type</code> param, or generate a command dynamically based on relation
AST.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>build a simple :create command</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_command'>command</span><span class='lparen'>(</span><span class='symbol'>:create</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>build a command which returns multiple results</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_command'>command</span><span class='lparen'>(</span><span class='symbol'>:create</span><span class='comma'>,</span> <span class='label'>result:</span> <span class='id identifier rubyid_many'>many</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>build a command which uses a specific plugin</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_command'>command</span><span class='lparen'>(</span><span class='symbol'>:create</span><span class='comma'>,</span> <span class='label'>plugin:</span> <span class='symbol'>:timestamps</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>build a command which sends results through a custom mapper</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_command'>command</span><span class='lparen'>(</span><span class='symbol'>:create</span><span class='comma'>,</span> <span class='label'>mapper:</span> <span class='symbol'>:my_mapper_identifier</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>return an existing custom command</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_command'>command</span><span class='lparen'>(</span><span class='symbol'>:my_custom_command_identifier</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The command type (:create, :update or :delete)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:mapper</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>An optional mapper applied to the command result</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:use</span>
          <span class="type">(<tt>Array&lt;Symbol&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>[]</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>A list of command plugins</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:result</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>:one</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>Set how many results the command should return.
Can be <code>:one</code> or <code>:many</code></p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Command.html" title="ROM::Command (class)">ROM::Command</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each-instance_method">
  
    #<strong>each</strong> {|Hash| ... } &#x21d2; <tt>Enumerator</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Yields relation tuples</p>

<p>Every tuple is processed through Relation#output_schema, it&#39;s a no-op by default</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerator</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if block is not provided</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 217</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_to_enum'>to_enum</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_auto_struct?'>auto_struct?</span>
    <span class='id identifier rubyid_mapper'>mapper</span><span class='period'>.</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_tuple'>tuple</span><span class='op'>|</span> <span class='id identifier rubyid_output_schema'>output_schema</span><span class='lbracket'>[</span><span class='id identifier rubyid_tuple'>tuple</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_struct'>struct</span><span class='op'>|</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_struct'>struct</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_tuple'>tuple</span><span class='op'>|</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_output_schema'>output_schema</span><span class='lbracket'>[</span><span class='id identifier rubyid_tuple'>tuple</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eager_load-instance_method">
  
    #<strong>eager_load</strong>(assoc)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a graph node prepared by the given association</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>An</span>
      
      
        <span class='type'>(<tt>Association</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>association object</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303
304
305
306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 300</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eager_load'>eager_load</span><span class='lparen'>(</span><span class='id identifier rubyid_assoc'>assoc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_relation'>relation</span> <span class='op'>=</span> <span class='id identifier rubyid_assoc'>assoc</span><span class='period'>.</span><span class='id identifier rubyid_prepare'>prepare</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_assoc'>assoc</span><span class='period'>.</span><span class='id identifier rubyid_override?'>override?</span>
    <span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='lparen'>(</span><span class='id identifier rubyid_assoc'>assoc</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_preload_assoc'>preload_assoc</span><span class='lparen'>(</span><span class='id identifier rubyid_assoc'>assoc</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first-instance_method">
  
    #<strong>first</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/Materializable.html#first-instance_method" title="ROM::Relation::Materializable#first (method)">Materializable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return first tuple from a relation coerced to an array</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="map_to-instance_method">
  
    #<strong>map_to</strong>(klass, **opts)  &#x21d2; <tt><span class='object_link'><a href="Relation/Composite.html" title="ROM::Relation::Composite (class)">Relation::Composite</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a new relation that will map its tuples to instance of the provided class</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_map_to'>map_to</span><span class='lparen'>(</span><span class='const'>MyUserModel</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>klass</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Your custom model class</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Relation/Composite.html" title="ROM::Relation::Composite (class)">Relation::Composite</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


547
548
549</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 547</span>

<span class='kw'>def</span> <span class='id identifier rubyid_map_to'>map_to</span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_with'>with</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>auto_struct:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>meta:</span> <span class='lbrace'>{</span> <span class='label'>model:</span> <span class='id identifier rubyid_klass'>klass</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="map_with-instance_method">
  
    
      <span class="overload">#<strong>map_with</strong>(model)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>map_with</strong>(*mappers)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
    
      <span class="overload">#<strong>map_with</strong>(*mappers, auto_map: true)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Maps the wrapped relation with other mappers available in the registry</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>map_with</strong>(model)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Map tuples to the provided custom model class</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_map_with'>map_with</span><span class='lparen'>(</span><span class='const'>MyUserModel</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>]</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>model Your custom model class</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>map_with</strong>(*mappers)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Map tuples using registered mappers</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_map_with'>map_with</span><span class='lparen'>(</span><span class='symbol'>:my_mapper</span><span class='comma'>,</span> <span class='symbol'>:my_other_mapper</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mappers</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of mapper identifiers</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>map_with</strong>(*mappers, auto_map: true)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Map tuples using auto-mapping and custom registered mappers</p>

<p>If <code>auto_map</code> is enabled, your mappers will be applied after performing
default auto-mapping. This means that you can compose complex relations
and have them auto-mapped, and use much simpler custom mappers to adjust
resulting data according to your requirements.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_map_with'>map_with</span><span class='lparen'>(</span><span class='symbol'>:my_mapper</span><span class='comma'>,</span> <span class='symbol'>:my_other_mapper</span><span class='comma'>,</span> <span class='label'>auto_map:</span> <span class='kw'>true</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mappers</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of mapper identifiers</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A new relation proxy with pipelined relation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


533
534
535</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 533</span>

<span class='kw'>def</span> <span class='id identifier rubyid_map_with'>map_with</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_with'>with</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new-instance_method">
  
    #<strong>new</strong>(dataset, new_opts = EMPTY_HASH)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a new relation with provided dataset and additional options</p>

<p>Use this method whenever you need to use dataset API to get a new dataset
and you want to return a relation back. Typically relation API should be
enough though. If you find yourself using this method, it might be worth
to consider reporting an issue that some dataset functionality is not available
through relation API.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>with a new dataset</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_some_method'>some_method</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>with a new dataset and options</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_some_method'>some_method</span><span class='comma'>,</span> <span class='label'>other:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>options</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>new_opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>EMPTY_HASH</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Additional options</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


418
419
420
421
422
423
424
425
426
427
428
429</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 418</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='comma'>,</span> <span class='id identifier rubyid_new_opts'>new_opts</span> <span class='op'>=</span> <span class='const'>EMPTY_HASH</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_new_opts'>new_opts</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_options'>options</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_new_opts'>new_opts</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:schema</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_new_opts'>new_opts</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:input_schema</span> <span class='op'>||</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:output_schema</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_new_opts'>new_opts</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="node-instance_method">
  
    #<strong>node</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a graph node for a given association identifier</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'></span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt><span class='object_link'>Relation::Name</span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


287
288
289
290
291</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 287</span>

<span class='kw'>def</span> <span class='id identifier rubyid_node'>node</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_assoc'>assoc</span> <span class='op'>=</span> <span class='id identifier rubyid_associations'>associations</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_assoc'>assoc</span><span class='period'>.</span><span class='id identifier rubyid_node'>node</span>
  <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_eager_load'>eager_load</span><span class='lparen'>(</span><span class='id identifier rubyid_assoc'>assoc</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="one-instance_method">
  
    #<strong>one</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/Materializable.html#one-instance_method" title="ROM::Relation::Materializable#one (method)">Materializable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Delegate to loaded relation and return one object</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Relation/Loaded.html#one-instance_method" title="ROM::Relation::Loaded#one (method)">Loaded#one</a></span></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="one!-instance_method">
  
    #<strong>one!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/Materializable.html#one!-instance_method" title="ROM::Relation::Materializable#one! (method)">Materializable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Delegate to loaded relation and return one object</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Relation/Loaded.html#one-instance_method" title="ROM::Relation::Loaded#one (method)">Loaded#one</a></span></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schemas-instance_method">
  
    #<strong>schemas</strong>  &#x21d2; <tt>Hash&lt;Symbol=&gt;<span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return all registered relation schemas</p>

<p>This holds all schemas defined via <code>view</code> DSL</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;Symbol=&gt;<span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


588
589
590</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 588</span>

<span class='kw'>def</span> <span class='id identifier rubyid_schemas'>schemas</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_schemas'>schemas</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_a-instance_method">
  
    #<strong>to_a</strong>  &#x21d2; <tt>Array&lt;Hash&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Materializes a relation into an array</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Hash&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 360</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_a'>to_a</span>
  <span class='id identifier rubyid_to_enum'>to_enum</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_ast-instance_method">
  
    #<strong>to_ast</strong>  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns AST for the wrapped relation</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


468
469
470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 468</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_ast'>to_ast</span>
  <span class='lbracket'>[</span><span class='symbol'>:relation</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='comma'>,</span> <span class='id identifier rubyid_attr_ast'>attr_ast</span><span class='comma'>,</span> <span class='id identifier rubyid_meta_ast'>meta_ast</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with-instance_method">
  
    #<strong>with</strong>(opts)  &#x21d2; <tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance with the same dataset but new options</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>users.with(output_schema: -&gt; tuple { .. })</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>New options</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


443
444
445
446
447
448
449
450
451
452</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 443</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with'>with</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_options'>new_options</span> <span class='op'>=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:meta</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>meta:</span> <span class='id identifier rubyid_meta'>meta</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:meta</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_opts'>opts</span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_new_options'>new_options</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wrap-instance_method">
  
    #<strong>wrap</strong>(*names)  &#x21d2; <tt><span class='object_link'><a href="Relation/Wrap.html" title="ROM::Relation::Wrap (class)">Wrap</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Wrap other relations using association names</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='symbol'>:owner</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>names</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list with association identifiers</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Relation/Wrap.html" title="ROM::Relation::Wrap (class)">Wrap</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


331
332
333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 331</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wrap_around'>wrap_around</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_associations'>associations</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wrap_around-instance_method">
  
    #<strong>wrap_around</strong>(*others)  &#x21d2; <tt><span class='object_link'><a href="Relation/Wrap.html" title="ROM::Relation::Wrap (class)">Relation::Wrap</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Wrap around other relations</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>others</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Other relations</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Relation/Wrap.html" title="ROM::Relation::Wrap (class)">Relation::Wrap</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'core/lib/rom/relation.rb', line 342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wrap_around'>wrap_around</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wrap_class'>wrap_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Jan 25 19:14:24 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.6.5).
</div>

    </div>
  </body>
</html>