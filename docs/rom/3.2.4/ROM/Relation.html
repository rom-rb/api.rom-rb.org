<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ROM::Relation
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ROM::Relation";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span>
     &raquo; 
    <span class="title">Relation</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ROM::Relation
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ROM::Relation</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>Dry::Core::ClassAttributes, <span class='object_link'><a href="Relation/ClassInterface.html" title="ROM::Relation::ClassInterface (module)">ClassInterface</a></span></dd>
  </dl>
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Relation/Materializable.html" title="ROM::Relation::Materializable (module)">Materializable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/rom/relation.rb<span class="defines">,<br />
  lib/rom/relation/name.rb,<br /> lib/rom/relation/graph.rb,<br /> lib/rom/relation/loaded.rb,<br /> lib/rom/relation/curried.rb,<br /> lib/rom/relation/view_dsl.rb,<br /> lib/rom/relation/composite.rb,<br /> lib/rom/relation/materializable.rb,<br /> lib/rom/relation/class_interface.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Base relation class</p>

<p>Relation is a proxy for the dataset object provided by the gateway. It can forward methods to the dataset, which is why the “native” interface of the underlying gateway is available in the relation. This interface, however, is considered private and should not be used outside of the relation instance.</p>

<p>Individual adapters sets up their relation classes and provide different APIs depending on their persistence backend.</p>

<p>Vanilla Relation class doesn&#39;t have APIs that are specific to ROM container setup. When adapter Relation class inherits from this class, these APIs are added automatically, so that they can be registered within a container.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Relation/ClassInterface.html" title="ROM::Relation::ClassInterface (module)">ClassInterface</a></span></li>
    
  </ul>

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Memory/Relation.html" title="ROM::Memory::Relation (class)">Memory::Relation</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Relation/ClassInterface.html" title="ROM::Relation::ClassInterface (module)">ClassInterface</a></span>, <span class='object_link'><a href="Relation/Materializable.html" title="ROM::Relation::Materializable (module)">Materializable</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Relation/Composite.html" title="ROM::Relation::Composite (class)">Composite</a></span>, <span class='object_link'><a href="Relation/Curried.html" title="ROM::Relation::Curried (class)">Curried</a></span>, <span class='object_link'><a href="Relation/Graph.html" title="ROM::Relation::Graph (class)">Graph</a></span>, <span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Loaded</a></span>, <span class='object_link'><a href="Relation/ViewDSL.html" title="ROM::Relation::ViewDSL (class)">ViewDSL</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="NOOP_OUTPUT_SCHEMA-constant" class="">NOOP_OUTPUT_SCHEMA =
          <div class="docstring">
  <div class="discussion">
    
<p>Default no-op output schema which is called in `Relation#each`</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_tuple'>tuple</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_tuple'>tuple</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#dataset-instance_method" title="#dataset (instance method)">#<strong>dataset</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Dataset used by the relation provided by relation&#39;s gateway.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#mappers-instance_method" title="#mappers (instance method)">#<strong>mappers</strong>  &#x21d2; MapperRegistry </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>An optional mapper registry (empty by default).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#schema-instance_method" title="#schema (instance method)">#<strong>schema</strong>  &#x21d2; Schema </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Relation schema, defaults to class-level canonical schema (if it was defined) and sets an empty one as the fallback.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-class_method" title="#[] (class method)">.<strong>[]</strong>(adapter)  &#x21d2; Class </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#[]-class_method" title="ROM::Relation::ClassInterface#[] (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return adapter-specific relation subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#forward-class_method" title="#forward (class method)">.<strong>forward</strong>(*methods)  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#forward-class_method" title="ROM::Relation::ClassInterface#forward (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Dynamically define a method that will forward to the dataset and wrap response in the relation itself.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schema-class_method" title="#schema (class method)">.<strong>schema</strong>(dataset = nil, as: nil, infer: false, &amp;block)  &#x21d2; Schema </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#schema-class_method" title="ROM::Relation::ClassInterface#schema (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Specify canonical schema for a relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use-class_method" title="#use (class method)">.<strong>use</strong>(plugin, _options = EMPTY_HASH)  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#use-class_method" title="ROM::Relation::ClassInterface#use (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Include a registered plugin in this relation class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#view-class_method" title="#view (class method)">.<strong>view</strong>(*args, &amp;block)  &#x21d2; Symbol </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      extended
      from <span class='object_link'><a href="Relation/ClassInterface.html#view-class_method" title="ROM::Relation::ClassInterface#view (method)">ClassInterface</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define a relation view with a specific schema.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(name)  &#x21d2; Schema::Attribute </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return schema attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#associations-instance_method" title="#associations (instance method)">#<strong>associations</strong>  &#x21d2; AssociationSet </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return schema&#39;s association set (empty by default).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>  &#x21d2; Relation::Loaded </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Loads relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong> {|Hash| ... } &#x21d2; Enumerator </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Yields relation tuples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first-instance_method" title="#first (instance method)">#<strong>first</strong>  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Relation/Materializable.html#first-instance_method" title="ROM::Relation::Materializable#first (method)">Materializable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return first tuple from a relation coerced to an array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#graph-instance_method" title="#graph (instance method)">#<strong>graph</strong>(*others)  &#x21d2; Relation::Graph </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Composes with other relations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-instance_method" title="#new (instance method)">#<strong>new</strong>(dataset, new_opts = EMPTY_HASH)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return a new relation with provided dataset and additional options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#one-instance_method" title="#one (instance method)">#<strong>one</strong>  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Relation/Materializable.html#one-instance_method" title="ROM::Relation::Materializable#one (method)">Materializable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Delegate to loaded relation and return one object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#one!-instance_method" title="#one! (instance method)">#<strong>one!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Relation/Materializable.html#one!-instance_method" title="ROM::Relation::Materializable#one! (method)">Materializable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Delegate to loaded relation and return one object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schemas-instance_method" title="#schemas (instance method)">#<strong>schemas</strong>  &#x21d2; Hash&lt;Symbol=&gt;Schema&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return all registered relation schemas.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array&lt;Hash&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Materializes a relation into an array.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="dataset-instance_method">
  
    #<strong>dataset</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns dataset used by the relation provided by relation&#39;s gateway.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>dataset used by the relation provided by relation&#39;s gateway</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 61</span>

<span class='id identifier rubyid_param'>param</span> <span class='symbol'>:dataset</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="mappers-instance_method">
  
    #<strong>mappers</strong>  &#x21d2; <tt><span class='object_link'><a href="MapperRegistry.html" title="ROM::MapperRegistry (class)">MapperRegistry</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an optional mapper registry (empty by default).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MapperRegistry.html" title="ROM::MapperRegistry (class)">MapperRegistry</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an optional mapper registry (empty by default)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 65</span>

<span class='id identifier rubyid_option'>option</span> <span class='symbol'>:mappers</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='const'><span class='object_link'><a href="MapperRegistry.html" title="ROM::MapperRegistry (class)">MapperRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="schema-instance_method">
  
    #<strong>schema</strong>  &#x21d2; <tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns relation schema, defaults to class-level canonical schema (if it was defined) and sets an empty one as the fallback.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>relation schema, defaults to class-level canonical schema (if it was defined) and sets an empty one as the fallback</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 72</span>

<span class='id identifier rubyid_option'>option</span> <span class='symbol'>:schema</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_default_schema'>default_schema</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-class_method">
  
    .<strong>[]</strong>(adapter)  &#x21d2; <tt>Class</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#[]-class_method" title="ROM::Relation::ClassInterface#[] (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return adapter-specific relation subclass</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:memory</span><span class='rbracket'>]</span>
<span class='comment'># =&gt; ROM::Memory::Relation</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="forward-class_method">
  
    .<strong>forward</strong>(*methods)  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#forward-class_method" title="ROM::Relation::ClassInterface#forward (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Dynamically define a method that will forward to the dataset and wrap response in the relation itself</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>SomeAdapterRelation</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span>
  <span class='id identifier rubyid_forward'>forward</span> <span class='symbol'>:super_query</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schema-class_method">
  
    .<strong>schema</strong>(dataset = nil, as: nil, infer: false, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#schema-class_method" title="ROM::Relation::ClassInterface#schema (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Specify canonical schema for a relation</p>

<p>With a schema defined commands will set up a type-safe input handler automatically</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_schema'>schema</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_attribute'>attribute</span> <span class='symbol'>:id</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Types.html" title="ROM::Types (module)">Types</a></span></span><span class='op'>::</span><span class='const'>Serial</span>
    <span class='id identifier rubyid_attribute'>attribute</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Types.html" title="ROM::Types (module)">Types</a></span></span><span class='op'>::</span><span class='const'>String</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># access schema
</span><span class='const'>Users</span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An optional dataset name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>infer</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Whether to do an automatic schema inferring</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use-class_method">
  
    .<strong>use</strong>(plugin, _options = EMPTY_HASH)  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#use-class_method" title="ROM::Relation::ClassInterface#use (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Include a registered plugin in this relation class</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>plugin</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

  
    
    
    
    


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="view-class_method">
  
    
      <span class="overload">#<strong>view</strong>(name, schema, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
    
      <span class="overload">#<strong>view</strong>(name, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
    
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/ClassInterface.html#view-class_method" title="ROM::Relation::ClassInterface#view (method)">ClassInterface</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define a relation view with a specific schema</p>

<p>Explicit relation views allow relation composition with auto-mapping in repositories. It&#39;s useful for cases like defining custom views for associations where relations (even from different databases) can be composed together and automatically mapped in memory to structs.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>view</strong>(name, schema, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>View with the canonical schema</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:listing</span><span class='comma'>,</span> <span class='id identifier rubyid_schema'>schema</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>View with a projected schema</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:listing</span><span class='comma'>,</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>view</strong>(name, &amp;block)  &#x21d2; <tt>Symbol</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>View with the canonical schema and arguments</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:by_name</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>View with projected schema and arguments</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:by_name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_schema'>schema</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_project'>project</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_relation'>relation</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>View with a schema extended with foreign attributes</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Users</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../ROM.html" title="ROM (module)">ROM</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span></span><span class='lbracket'>[</span><span class='symbol'>:sql</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_view'>view</span><span class='lparen'>(</span><span class='symbol'>:index</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_schema'>schema</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_append'>append</span><span class='lparen'>(</span><span class='id identifier rubyid_relations'>relations</span><span class='lbracket'>[</span><span class='symbol'>:tasks</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_relation'>relation</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>
      </li>
    
  </ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>view method name</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    #<strong>[]</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="Schema/Attribute.html" title="ROM::Schema::Attribute (class)">Schema::Attribute</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return schema attribute</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>accessing canonical attribute</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
<span class='comment'># =&gt; #&lt;ROM::SQL::Attribute[Integer] primary_key=true name=:id source=ROM::Relation::Name(users)&gt;</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>accessing joined attribute</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_tasks_with_users'>tasks_with_users</span> <span class='op'>=</span> <span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select_append'>select_append</span><span class='lparen'>(</span><span class='id identifier rubyid_tasks'>tasks</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tasks_with_users'>tasks_with_users</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='comma'>,</span> <span class='symbol'>:tasks</span><span class='rbracket'>]</span>
<span class='comment'># =&gt; #&lt;ROM::SQL::Attribute[String] primary_key=false name=:title source=ROM::Relation::Name(tasks)&gt;</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Schema/Attribute.html" title="ROM::Schema::Attribute (class)">Schema::Attribute</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 100</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="associations-instance_method">
  
    #<strong>associations</strong>  &#x21d2; <tt><span class='object_link'><a href="AssociationSet.html" title="ROM::AssociationSet (class)">AssociationSet</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return schema&#39;s association set (empty by default)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="AssociationSet.html" title="ROM::AssociationSet (class)">AssociationSet</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Schema&#39;s association set (empty by default)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 235</span>

<span class='kw'>def</span> <span class='id identifier rubyid_associations'>associations</span>
  <span class='ivar'>@associations</span> <span class='op'>||=</span> <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_associations'>associations</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="call-instance_method">
  
    #<strong>call</strong>  &#x21d2; <tt><span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Relation::Loaded</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Loads relation</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Relation::Loaded</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>
  <span class='const'><span class='object_link'><a href="Relation/Loaded.html" title="ROM::Relation::Loaded (class)">Loaded</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Relation/Loaded.html#new-instance_method" title="ROM::Relation::Loaded#new (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each-instance_method">
  
    #<strong>each</strong> {|Hash| ... } &#x21d2; <tt>Enumerator</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Yields relation tuples</p>

<p>Every tuple is processed through Relation#output_schema, it&#39;s a no-op by default</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerator</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if block is not provided</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_to_enum'>to_enum</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_tuple'>tuple</span><span class='op'>|</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_output_schema'>output_schema</span><span class='lbracket'>[</span><span class='id identifier rubyid_tuple'>tuple</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first-instance_method">
  
    #<strong>first</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/Materializable.html#first-instance_method" title="ROM::Relation::Materializable#first (method)">Materializable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return first tuple from a relation coerced to an array</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="graph-instance_method">
  
    #<strong>graph</strong>(*others)  &#x21d2; <tt><span class='object_link'><a href="Relation/Graph.html" title="ROM::Relation::Graph (class)">Relation::Graph</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Composes with other relations</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>others</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="ROM::Relation (class)">Relation</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The other relation(s) to compose with</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Relation/Graph.html" title="ROM::Relation::Graph (class)">Relation::Graph</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_graph'>graph</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Relation/Graph.html" title="ROM::Relation::Graph (class)">Graph</a></span></span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new-instance_method">
  
    #<strong>new</strong>(dataset, new_opts = EMPTY_HASH)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return a new relation with provided dataset and additional options</p>

<p>Use this method whenever you need to use dataset API to get a new dataset and you want to return a relation back. Typically relation API should be enough though. If you find yourself using this method, it might be worth to consider reporting an issue that some dataset functionality is not available through relation API.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>with a new dataset</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_some_method'>some_method</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>with a new dataset and options</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_dataset'>dataset</span><span class='period'>.</span><span class='id identifier rubyid_some_method'>some_method</span><span class='comma'>,</span> <span class='label'>other:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>options</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dataset</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>new_opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>EMPTY_HASH</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Additional options</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195
196
197
198
199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='comma'>,</span> <span class='id identifier rubyid_new_opts'>new_opts</span> <span class='op'>=</span> <span class='const'>EMPTY_HASH</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_opts'>new_opts</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_new_opts'>new_opts</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:schema</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:input_schema</span> <span class='op'>||</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:output_schema</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_new_opts'>new_opts</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_new_opts'>new_opts</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dataset'>dataset</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="one-instance_method">
  
    #<strong>one</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/Materializable.html#one-instance_method" title="ROM::Relation::Materializable#one (method)">Materializable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Delegate to loaded relation and return one object</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Relation/Loaded.html#one-instance_method" title="ROM::Relation::Loaded#one (method)">Loaded#one</a></span></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="one!-instance_method">
  
    #<strong>one!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Relation/Materializable.html#one!-instance_method" title="ROM::Relation::Materializable#one! (method)">Materializable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Delegate to loaded relation and return one object</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Relation/Loaded.html#one-instance_method" title="ROM::Relation::Loaded#one (method)">Loaded#one</a></span></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schemas-instance_method">
  
    #<strong>schemas</strong>  &#x21d2; <tt>Hash&lt;Symbol=&gt;<span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return all registered relation schemas</p>

<p>This holds all schemas defined via `view` DSL</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;Symbol=&gt;<span class='object_link'><a href="Schema.html" title="ROM::Schema (class)">Schema</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 226</span>

<span class='kw'>def</span> <span class='id identifier rubyid_schemas'>schemas</span>
  <span class='ivar'>@schemas</span> <span class='op'>||=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_schemas'>schemas</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_a-instance_method">
  
    #<strong>to_a</strong>  &#x21d2; <tt>Array&lt;Hash&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Materializes a relation into an array</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Hash&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rom/relation.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_a'>to_a</span>
  <span class='id identifier rubyid_to_enum'>to_enum</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Jan 25 19:00:46 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.6.5).
</div>

    </div>
  </body>
</html>